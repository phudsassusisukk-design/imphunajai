<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Collect Numbers Mobile</title>
  <style>
    body { margin: 0; overflow: hidden; background: black; }
    canvas { display: block; touch-action: none; }
  </style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// canvas เต็มหน้าจอมือถือ
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let player = { x: canvas.width/2, y: canvas.height/2, size: 50, speed: 10 };
let score = 0;
let numberValue = 10;

let number = {
  x: Math.random() * (canvas.width - 50),
  y: Math.random() * (canvas.height - 50),
  size: 40
};

let target = { x: player.x, y: player.y };

// ตรวจจับการแตะหน้าจอ
canvas.addEventListener("touchstart", (e) => {
  e.preventDefault();
  const touch = e.touches[0];
  const rect = canvas.getBoundingClientRect();
  target.x = touch.clientX - player.size/2;
  target.y = touch.clientY - player.size/2;
});

// เคลื่อนผู้เล่นไปตำแหน่งเป้าหมาย
function movePlayer() {
  const dx = target.x - player.x;
  const dy = target.y - player.y;
  const dist = Math.sqrt(dx*dx + dy*dy);

  if(dist > player.speed){
    player.x += dx / dist * player.speed;
    player.y += dy / dist * player.speed;
  }
}

// spawn ตัวเลขใหม่
function respawnNumber() {
  number.x = Math.random() * (canvas.width - number.size);
  number.y = Math.random() * (canvas.height - number.size);
  numberValue += 10;
}

// ตรวจการชน
function checkCollision() {
  const dx = player.x - number.x;
  const dy = player.y - number.y;
  const distance = Math.sqrt(dx*dx + dy*dy);

  if(distance < (player.size + number.size)/2) {
    score += numberValue;
    respawnNumber();
  }
}

// วาดเกม
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // วาดผู้เล่น
  ctx.fillStyle = "cyan";
  ctx.fillRect(player.x, player.y, player.size, player.size);

  // วาดตัวเลข
  ctx.fillStyle = "yellow";
  ctx.font = number.size + "px Arial";
  ctx.fillText(numberValue, number.x, number.y + number.size);

  // วาดคะแนน
  ctx.fillStyle = "white";
  ctx.font = "30px Arial";
  ctx.fillText("Score: " + score, 10, 40);
}

// เกมลูป
function gameLoop() {
  movePlayer();
  checkCollision();
  draw();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
